<!-- ========== ุจุฎุด ุณุฑูุฑ (ูพุฑุฏุงุฒุด ุฑู ุณุฑูุฑ) ========== -->
<div class="bg-indigo-50/50 p-6 rounded-2xl mb-12 border border-indigo-100">
  <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
    <i class="fas fa-server text-indigo-600"></i> ูพุฑุฏุงุฒุด ุฑู ุณุฑูุฑ
  </h2>
  <form action="/process" method="post" id="serverForm" class="space-y-5">
    <!-- ูุณุฑ ูพูุดู -->
    <div>
      <label for="folderPath" class="block font-semibold text-gray-700 mb-1">
        <i class="fas fa-map-marker-alt ml-1"></i> ูุณุฑ ูพูุดู ุฑู ุณุฑูุฑ:
      </label>
      <div class="relative">
        <i
          class="fas fa-folder absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"
        ></i>
        <input
          type="text"
          id="folderPath"
          name="folderPath"
          required
          class="w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-full focus:border-indigo-400 focus:ring focus:ring-indigo-200 transition"
          placeholder="/home/user/project  ุง  C:\myproject"
        />
      </div>
    </div>

    <!-- ฺฏุฒููโูุง ูพุดุฑูุชู (ููฺฏ ฺฉุณุงู ุจุง ุจุฎุด ฺฉูุงูุช) -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-white p-4 rounded-xl">
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ูพุณููุฏูุง ูุฌุงุฒ (ุจุง ฺฉุงูุง ุฌุฏุง ฺฉูุฏ)</label
        >
        <input
          type="text"
          name="selectedTypes"
          id="serverSelectedTypes"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          placeholder="js,ts,json,html"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุฌุฏุงฺฉููุฏู ุจู ูุงูโูุง</label
        >
        <input
          type="text"
          name="separator"
          id="serverSeparator"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          value="--- {filename} ---"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ูุงู ูุงู ุฎุฑูุฌ</label
        >
        <input
          type="text"
          name="outputName"
          id="serverOutputName"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          value="merged_files.txt"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุญุฏุงฺฉุซุฑ ุนูู (ุงุฎุชุงุฑ)</label
        >
        <input
          type="number"
          name="maxDepth"
          id="serverMaxDepth"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          placeholder="ูุซูุงู ณ"
        />
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุงูฺฏููุง ูุงุฏุฏูโฺฏุฑูุชู (ุจุง ฺฉุงูุง ุฌุฏุง ฺฉูุฏ)</label
        >
        <input
          type="text"
          name="ignorePatterns"
          id="serverIgnorePatterns"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          placeholder="node_modules, .git, *.log"
        />
      </div>
    </div>

    <!-- ฺฺฉโุจุงฺฉุณโูุง -->
    <div class="flex flex-wrap gap-4 bg-white p-3 rounded-xl">
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          name="cleanMode"
          value="true"
          class="w-4 h-4 text-indigo-600"
        />
        <span>ูพุงฺฉโุณุงุฒ ู ูุดุฑุฏูโุณุงุฒ</span>
      </label>
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          name="commonOnly"
          value="true"
          class="w-4 h-4 text-indigo-600"
        />
        <span>ููุท ุงููุงุน ูุงู ุฑุงุฌ</span>
      </label>
    </div>

    <button
      type="submit"
      class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-full font-bold text-lg hover:shadow-lg transition transform hover:-translate-y-1"
    >
      ูพุฑุฏุงุฒุด ู ุฏุฑุงูุช ูุงู
    </button>
  </form>
  <p class="mt-2 text-sm text-gray-500">
    <i class="fas fa-info-circle"></i> ูุงู ุญุงุตู ุจูุงูุงุตูู ุฏุงูููุฏ ูโุดูุฏ.
  </p>
</div>

<!-- ========== ุจุฎุด ฺฉูุงูุช (ูพุฑุฏุงุฒุด ูุญู) ========== -->
<div class="bg-white p-6 rounded-2xl border border-gray-200">
  <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
    <i class="fas fa-laptop text-green-600"></i> ูพุฑุฏุงุฒุด ูุญู (ุฏุฑ ูุฑูุฑฺฏุฑ)
  </h2>

  <!-- Drop zone -->
  <div
    id="dropZone"
    class="drop-zone border-4 border-dashed border-gray-300 rounded-2xl p-8 text-center bg-gray-50 cursor-pointer transition hover:border-indigo-400 hover:bg-indigo-50 mb-6"
  >
    <i class="fas fa-cloud-upload-alt text-5xl text-gray-400 mb-3"></i>
    <p class="text-gray-700 text-lg">ูพูุดู ุฑุง ุงูุฌุง ุจฺฉุดุฏ ู ุฑูุง ฺฉูุฏ</p>
    <small class="text-gray-500">ุง</small>
    <button
      type="button"
      id="browseBtn"
      class="block mx-auto mt-3 px-6 py-2 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition"
    >
      ุงูุชุฎุงุจ ูพูุดู
    </button>
    <input
      type="file"
      id="fileInput"
      class="hidden"
      webkitdirectory
      directory
      multiple
    />
  </div>

  <!-- ูุณุช ุงููุงุน ูุงูโูุง (ูพูุง) -->
  <div id="fileTypesSection" class="file-types mb-6 hidden">
    <h3 class="font-bold text-gray-700 mb-3">ุงููุงุน ูุงูโูุง ุงูุช ุดุฏู</h3>
    <div class="flex gap-2 mb-3">
      <button
        type="button"
        id="selectAllBtn"
        class="px-4 py-1 bg-gray-200 rounded-full text-sm hover:bg-gray-300 transition"
      >
        ุงูุชุฎุงุจ ููู
      </button>
      <button
        type="button"
        id="deselectAllBtn"
        class="px-4 py-1 bg-gray-200 rounded-full text-sm hover:bg-gray-300 transition"
      >
        ุนุฏู ุงูุชุฎุงุจ ููู
      </button>
    </div>
    <div
      id="fileTypeGrid"
      class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 max-h-48 overflow-y-auto p-2 border border-gray-200 rounded-xl bg-gray-50"
    ></div>
  </div>

  <!-- ฺฏุฒููโูุง (ุฏููุงู ูุดุงุจู ุณุฑูุฑ) -->
  <div class="bg-gray-50 p-5 rounded-2xl mb-5">
    <h3 class="font-bold text-gray-700 mb-4">ฺฏุฒููโูุง</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุฌุฏุงฺฉููุฏู ุจู ูุงูโูุง</label
        >
        <input
          type="text"
          id="separatorLocal"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          value="--- {filename} ---"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ูุงู ูุงู ุฎุฑูุฌ</label
        >
        <input
          type="text"
          id="outputName"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          value="merged_files.txt"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุญุฏุงฺฉุซุฑ ุนูู (ุงุฎุชุงุฑ)</label
        >
        <input
          type="number"
          id="maxDepthLocal"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          placeholder="ูุซูุงู ณ"
        />
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-600 mb-1"
          >ุงูฺฏููุง ูุงุฏุฏูโฺฏุฑูุชู (ุจุง ฺฉุงูุง)</label
        >
        <input
          type="text"
          id="ignorePatternsLocal"
          class="w-full px-4 py-2 border border-gray-300 rounded-full focus:border-indigo-400"
          placeholder="node_modules, .git, *.log"
        />
      </div>
    </div>
    <div class="flex flex-wrap gap-4 mt-4">
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          id="cleanModeLocal"
          checked
          class="w-4 h-4 text-indigo-600"
        />
        <span>ูพุงฺฉโุณุงุฒ ู ูุดุฑุฏูโุณุงุฒ</span>
      </label>
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          id="commonOnlyLocal"
          class="w-4 h-4 text-indigo-600"
        />
        <span>ููุท ุงููุงุน ูุงู ุฑุงุฌ</span>
      </label>
    </div>
  </div>

  <!-- ูุถุนุช ู ูพุดุฑูุช -->
  <div
    id="statusMessage"
    class="status-message hidden p-3 rounded-lg mb-4"
  ></div>
  <div
    id="progressBar"
    class="progress-bar w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-4 hidden"
  >
    <div
      id="progressFill"
      class="progress-fill h-full bg-gradient-to-r from-indigo-600 to-purple-600 w-0 transition-all"
    ></div>
  </div>

  <!-- ุฏฺฉููโูุง -->
  <button
    id="processLocalBtn"
    class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-full font-bold text-lg hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition"
    disabled
  >
    ุงุฏุบุงู ูุงูโูุง
  </button>
  <button
    id="copyLocalBtn"
    class="w-full mt-3 bg-green-600 text-white py-3 rounded-full font-bold text-lg hover:bg-green-700 hidden transition"
  >
    ๐ ฺฉูพ ุจู ฺฉููพโุจูุฑุฏ
  </button>

  <!-- ูุณุช ูุงูโูุง ุงูุช ุดุฏู -->
  <div
    id="fileList"
    class="file-list mt-5 max-h-60 overflow-y-auto bg-gray-50 p-4 rounded-xl hidden"
  ></div>
</div>
